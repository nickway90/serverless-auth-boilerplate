service: iSwap-backend

provider:
  name: aws
  runtime: nodejs6.10
  region: ap-northeast-1
  iamRoleStatements:
    -  Effect: "Allow"
       Action:
         - "dynamodb:*"
       Resource:
         - "*"

plugins:
 - serverless-async-await
 - serverless-plugin-warmup

functions:

  postRoster:
    warmup: true
    memorySize: 512
    timeout: 30
    handler: src/route/roster.post
    events:
      - http:
          method: POST
          path: /roster
          cors: true
    environment:
      CHROMELESS_ENDPOINT: ${env:CHROMELESS_ENDPOINT}
      CHROMELESS_API_KEY: ${env:CHROMELESS_API_KEY}

  getCrew:
    warmup: true
    memorySize: 512
    timeout: 30
    handler: src/route/roster.getCrew
    events:
      - http:
          method: POST
          path: /roster/crew
          cors: true
    environment:
      CHROMELESS_ENDPOINT: ${env:CHROMELESS_ENDPOINT}
      CHROMELESS_API_KEY: ${env:CHROMELESS_API_KEY}

  getRoster:
    warmup: true
    memorySize: 128
    timeout: 10
    handler: src/route/roster.get
    events:
      - http:
          method: GET
          path: /roster
          cors: true

  login:
    warmup: true
    memorySize: 512
    timeout: 10
    handler: src/route/login.post
    events:
      - http:
          method: POST
          path: /login
          cors: true
